# 好专利

![image](https://user-images.githubusercontent.com/98861569/152642017-a3a1efe6-f662-4187-8255-4d59fe72db71.png)
> 天道酬勤，量变质变...

![image](https://user-images.githubusercontent.com/99078052/152641805-c87b2aad-d8a2-4486-9588-5887bf9ced80.png)
> 看专利，不同友商，不同代理所...一切都是量级。

## 日拱一卒

### [H公司](https://analytics.zhihuiya.com/search/result/standard/1?sort=pdesc,claimdesc&limit=100&q=%28ANCS%3A%28%22%E5%8D%8E%E4%B8%BA%E6%8A%80%E6%9C%AF%22%20or%20%22%E5%8D%8E%E4%B8%BA%E7%BB%88%E7%AB%AF%22%29%29%20AND%20%28APD%3A%5B20210101%20TO%2020220206%5D%29&efq=COUNTRY%3A%28%22CN%22%29%20AND%20MIPC_FACET%3A%28%22G06K9%2F00%22%20OR%20%22G06N3%2F04%22%20OR%20%22G06K9%2F62%22%20OR%20%22H04L29%2F08%22%20OR%20%22G06F16%2F33%22%20OR%20%22G06F3%2F01%22%20OR%20%22H04L29%2F06%22%29&_type=query)

(ANCS:("华为技术" OR "华为终端"))

#### 非SEP

##### CN113330395A 实质审查 一种多屏交互的方法、装置、终端设备和车辆

![image](https://user-images.githubusercontent.com/99078052/152668306-ddafbff6-d119-462a-9b7c-4179c0cab0d8.png)
![image](https://user-images.githubusercontent.com/99078052/152668307-7b10ae88-2bdf-4fb1-91c0-d35efaa0aa44.png)
![image](https://user-images.githubusercontent.com/99078052/152668309-3a2a4c9b-e72f-44b6-b2ca-03bbdf732720.png)

```
技术领域
[0001]本申请涉及智能汽车领域，尤其涉及一种多屏交互的方法、装置、终端设备和车辆。

背景技术
[0002]随着智能化的发展，车辆的智能化也越来越高，智能座舱的功能也越来越受到消费者的关注。为了提升驾驶员的体验，车辆上有多个显示屏，一个显示屏用于显示车辆的速度、油耗、里程等信息，一个显示屏用于显示导航路线，一个显示屏用于显示音乐、无线广播等娱乐视频，以及其它功能的显示屏。一般情况下，每个显示屏显示的内容都是固定的，无法显示其它显示屏所要显示的内容。随着的投屏、屏幕共享等技术的发展，实现一个显示屏将其显示的内容推送到其它显示屏上显示，以共享显示内容，成为了用户的重要需求和厂商的研究热点。
[0003]对于配置多个显示屏的车型，在现有技术中，如果驾驶员想让一个显示屏上显示的内容推送到另一个显示屏上，则需要驾驶员在显示屏上点击特定按钮或在显示屏上拖动目标内容进行滑动的操作，这种需要驾驶员在显示屏进行操作的方式，分散了驾驶员精力，使得车辆行驶存在安全性问题。

发明内容
[0004]为了解决上述的问题，本申请的实施例提供了一种多屏交互的方法、装置、终端设备和车辆。
```

```
1.一种多屏交互的方法，其特征在于，
包括：
获取传感信息，所述传感信息包括手势信息；
根据所述手势信息，触发第一显示屏显示第一界面图像，所述第一界面图像包括子图像，所述子图像的移动趋势与所述手势信息相关联；
触发所述子图像显示于第二显示屏。

2.根据权利要求1所述的方法，当所述手势信息包括五指抓取手势时，其特征在于，
所述子图像显示的内容为所述第一界面图像的全部内容。
3.根据权利要求1所述的方法，当所述手势信息包括双指抓取手势时，其特征在于，
所述子图像显示的内容为所述第一界面图像中的第一应用程序呈现的界面，所述第一应用程序为用户选定的应用程序或正在运行的应用程序。
4.根据权利要求1-3任意一项所述的方法，其特征在于，
所述第一界面图像还包括位置信息，所述位置信息为其它可显示所述子图像的至少一个显示屏标识，以及所述至少一个显示屏相对于所述第一显示屏的方位信息。
5.根据权利要求1-4任意一项所述的方法，其特征在于，
在所述触发所述子图像显示于第二显示屏之前，还包括：
确定所述第二显示屏，所述第二显示屏根据第一位置信息、第二位置信息和存储的至少一个显示屏相对于所述第一显示屏的方位信息确定，所述第一位置信息为触发所述第一显示屏显示所述第一界面图像时手势的位置信息，所述第二位置信息为当前时刻手势的位置信息，所述至少一个显示屏包括所述第二显示屏。
6.根据权利要求1-5任意一项所述的方法，其特征在于，
所述确定所述第二显示屏，包括：
根据所述第一位置信息和所述第二位置信息，确定所述第二位置信息相对于所述第一位置信息的第一方位信息；
将所述第一方位信息与所述存储的至少一个显示屏相对于所述第一显示屏的方位信息进行比对；
当所述第一方位信息与所述第二显示屏相对于所述第一显示屏的方位信息相同时，确定所述第二显示屏。
7.根据权利要求5或6所述的方法，其特征在于，
所述触发所述子图像显示于第二显示屏，包括：
检测出所述第一位置信息与第二位置信息之间的距离大于设定阈值时，触发所述子图像显示于第二显示屏。
8.根据权利要求1-7任意一项所述的方法，所述子图像为应用程序图标时，其特征在于，
所述触发所述子图像显示于第二显示屏，包括：
触发所述子图像指示的图像显示于所述第二显示屏。
9.根据权利要求1-8任意一项所述的方法，其特征在于，
所述子图像的尺寸小于所述第一显示屏的尺寸。
10.根据权利要求1-9任意一项所述的方法，其特征在于，
所述位置信息显示在所述第一显示屏边缘位置上。
11.根据权利要求1-10任意一项所述的方法，其特征在于，
当所述第一显示屏的分辨率与所述第二显示屏的分辨率不相同时，所述方法还包括：
将所述子图像的分辨率设置为所述第二显示屏的分辨率。
12.根据权利要求1-11任意一项所述的方法，其特征在于，
当所述第一显示屏的尺寸与所述第二显示屏的尺寸不相同时，所述方法还包括：
将所述子图像的尺寸设置为所述第二显示屏的尺寸。
13.根据权利要求1-12任意一项所述的方法，其特征在于，
当所述第二显示屏的长边的尺寸或短边的尺寸小于所述第一显示屏时，所述方法还包括：
将所述子图像缩小至所述子图像的长边尺寸与所述第二显示屏的长边的尺寸相同；或
将所述子图像缩小至所述子图像的短边尺寸与所述第二显示屏的短边的尺寸相同。
```

```
27.一种车辆，其特征在于，
包括：
至少一个摄像头，
至少两个显示屏，
至少一个存储器，
至少一个处理器，用于执行如权利要求1-13中的任一项所述的方法。
28.一种计算机可读存储介质，其上存储有计算机程序，当所述计算机程序在计算机中执行时，令计算机执行权利要求1-13中任一项的所述的方法。
29.一种计算设备，包括存储器和处理器，其特征在于，
所述存储器中存储有可执行代码，所述处理器执行所述可执行代码时，实现权利要求1-13中任一项所述的方法。
```

```
[0074]图3为本申请实施例提供的一种多屏交互方法的流程示意图，该多屏交互方法可以由计算设备执行，也可以是由应用在计算设备内的处理装置执行，还可以由图1所示的系统来执行。其中，计算设备可以是终端，例如，车、车载装置(如车机、车载处理器、车载电脑等)，还可以是服务器等云端装置。该处理装置可以是芯片、处理电路、处理器等。为了便于描述，本申请将以处理器执行该多屏交互方法为例，展开介绍。参考图3所示，该多屏交互方法包括：
[0075]S301：获取传感信息。
[0076]其中，传感信息可以包括通过传感器获取的信息，例如，可以通过摄像头传感器和雷达传感器中的一个或多个获取的手势信息、环境信息等；还可以通过声音传感器获取环境声音信息，例如用户指令等。其中，上述传感信息可以是传感器采集到的信息，也可以是经过传感器和处理器等器件中的一个或多个器件处理过的信息，例如，通过传感器对图像信息进行降噪处理。
[0077]在具体实现过程中，当用户需要将一个显示屏(后续将该显示屏称为“源显示屏”)上显示的用户界面(user interface，UI)或应用程序(application，APP)呈现的界面投影到另一个显示屏(后续将该显示屏称为“目标显示屏”)时，可以通过座舱摄像头检测特定的肢体动作，例如手势(也可以理解为唤醒手势)等，触发开启多屏交互功能。也可以通过语音唤醒、点击显示屏上虚拟按键唤醒等方式，触发开启多屏交互功能。
[0078]在具体实现过程中，唤醒手势和操作手势等手势可以有多种实现方式，例如左划手势、右划手势、手掌悬停等，可以是动态手势(或称动态趋势手势)，也可是静态手势。用于手势识别的处理器可以通过接口电路获取传感信息，确定当前用户所比划的手势或动作。下面，本申请以“五指抓取实现显示屏投屏”和“两指抓取实现应用分享”这两类方案对手势展开介绍，应理解的是，本申请并不仅限于这两种方案。
[0079]以“五指抓取实现显示屏投屏”方案为例对手势动作展开介绍，如图4(a)所示，用户在开始抓取时，先张开五指，靠近源显示屏；抓取时，五指逐渐并拢；在投屏过程中，并拢的五指从源显示屏位置移动到目标显示屏位置，然后逐渐靠近目标显示屏，并逐渐张开五指。
[0080]以“两指抓取实现应用分享”方案为例对手势动作展开介绍，如图4(b)所示，用户在开始抓取时，先张开五指(或拇指和食指张开并让其它手指弯曲靠向掌心)，然后靠近源显示屏；抓取时，拇指和食指逐渐并拢，其它手指弯曲靠向掌心；在投屏过程中，并拢的两指从源显示屏位置移动到目标显示屏位置，然后逐渐靠近目标显示屏，并逐渐张开拇指和食指。
[0081]应理解，本申请实施例中的开启多屏交互功能的手势可以是上述“五指张开”的手势，或“五指张开，并逐渐靠近显示屏”的手势，也可以是其他手势，为了便于阐述，下面以上述手势为例展开介绍。
[0082]手势信息的判定，可以通过摄像头的图像(或视频流)获取，如通过手势识别算法识别出图像中人的手指、以及各个手指展示的手势；也可以通过雷达信息获取，如得到三维点云图像后，通过神经网络提取出图像中人的手指特征，再根据手指特征确定出手指呈现的手势；还可以通过其它信息进行判定，本申请在此不作限定，下面以摄像头拍摄的图像或视频流为例，来讲述本申请技术方案。
[0083]在开启多屏交互功能后，根据源显示屏所处的位置，获取对应位置的传感信息。其中，对应位置的传感信息可以是采集范围覆盖源显示屏操控位置的摄像头、雷达等传感器所采集到的信息或处理过的信息。例如，如图2(a)所示，处理器接收到显示屏101-2发送的开启交互功能的指令后，开启摄像头工作，以避免开启车辆内所有摄像头进行工作，节省车辆电量的功耗，同时保护车辆100内其它座位上的乘客隐私。
[0084]处理器在接收到传感信息后，对其进行手部目标检测和手势识别，以识别出用户手掌呈现的手势。示例性地，处理器接收到摄像头采集到一张包括手掌的图像，如图5所示，可以先对采集的图像进行预处理，其中，预处理可以包括对图片进行去噪和信息增强。然后可以利用手部目标检测算法获取图像中的目标手势，接着对手部的21自由度(degree odfreedoms，DOFS)或者26DOFS(或者更多)的二维(2dimension，2D)坐标进行关键点估计，得到当前手势的分类和描述。最后通过手势识别算法对目标手势进行识别，识别出图像中手掌展现的手势。
[0085]在本申请中，处理器在获取的某一张图像或视频流中某一帧图像中识别出唤醒手势或操作手势等特定手势。其中，在开启交互功能后，摄像头不断的拍摄图像或视频流，处理器也不断的获取图像或视频流进行处理，所以为了展现获取的图像或视频流中的图像的时序，本申请在描述时，让处理器对获取的图像或视频流中的图像按照时间的顺序进行编号，将此时获取的图像定义为第i张图像或视频流中第j帧图像，i和j均为大于0的正整数。
[0086]结合图4(a)和图4(b)所示，特定手势为一个动态趋势手势，处理器在确定特定手势过程中，可以将当前时刻得到图像与上一时刻得到的图像中的手指间的距离进行比对，如果五指之间的距离逐渐减小，则表明“五指并拢”手势；如果五指之间的距离逐渐减小，且中指、无名指和小拇指弯曲，则表明“拇指和食指逐渐并拢，其它手指弯曲靠向掌心”手势。
[0087]当处理器检测到特定手势时，控制源显示屏进入多屏交互状态，以便源显示屏将根据手势的变化，对显示的界面或显示的应用程序呈现的界面进行提取。处理器还可以根据摄像头获取的图像，利用手部3维(3dimension，3D)定位算法，计算出特定手势相对于摄像头的空间坐标(x0，y0，z0)。
[0088]如图2(a)所示，如果摄像头为飞行时间(time of flight，TOF)摄像头、双目摄像头等可以测量深度的摄像头时，处理器获取摄像头拍摄的图像和摄像头提供的深度信息后，利用摄像头的内参和外参数据，直接计算出特定手势相对于摄像头的光心的空间坐标。其中，TOF摄像头可以通过向目标物体连续发送光脉冲，并利用传感器接收从目标物体返回的光，基于探测光脉冲的飞行往返时间来得到目标物体距离。
[0089]如果摄像头为不可测量深度的单目摄像头时，处理器可以通过深度估计方法来计算手势的深度或距离。这里，给出几种可能的深度估计方法作为示例，本申请对此不做限定，例如：
[0090](1)基于多点透视(pespective-n-point，PNP)算法。使用基于手部模型先验，检测手掌处的关键点，结合摄像头模型，基于PNP算法粗略地估计手部位置，因为只需要对握拳手势进行位置估计，因此关键点检测模型可以对握拳手势进行深度优化。尽管个体差异使得这样得到的关键点3D位置绝对精度不高，但由于手势的方向判断所需要的位置精度并不严格，所以该方法也可以应用于判断方向移动的相对量。
[0091](2)基于深度学习的单目深度估计网络模型。获取摄像头拍摄的图像后，通过深度学习的单目深度估计网络模型可以直接对单目摄像头进行深度估计，从而产生一个虚拟3D摄像头，以弥补硬件3D摄像头的缺失，从而预测出特定手势在获取的传感信息中下一帧或多帧图像中的深度信息。
[0092]最后，处理器根据摄像头获取的图像和该图像的预测深度信息，利用摄像头的内参和外参数据，计算出特定手势相对于摄像头的光心的空间坐标。
```

```
[0093]S302：根据手势信息，触发第一显示屏显示第一界面图像。其中，第一显示屏为源显示屏，第一界面图像为源显示屏显示的界面图像，第一界面图像中还包括一个子图像，子图像可以为缩小版的第一界面图像，也可以为某个APP的图标等等，显示的内容可以为第一界面图像显示的全部画面，也可以为第一界面图像显示的部分图像。
[0094]处理器在检测到特定手势后，可以将当前时刻源显示屏呈现的部分或全部画面转化为一个小于源显示屏尺寸的子图像，或将源显示屏上显示的某个APP图标转化为子图像，呈现在源显示屏上，例如在源显示屏的中间位置、左侧位置等位置上显示。可选地，处理器在检测到特定手势后，也可以重新生成一个子图像，其尺寸小于源显示屏的尺寸，显示的内容与原先源显示屏上显示的界面同步。
[0095]例如，如图6所示，源显示屏上方可以设置有时间栏，中间部分为播放的视频所在区域。当特定手势为“五指并拢”手势时，处理器将当前时刻源显示屏上显示的整个界面(包括时间栏和视频所在区域)截成一张图像显示在源显示屏的中间位置。
[0096]如图7所示，当特定手势为“拇指和食指逐渐并拢，其它手指弯曲靠向掌心”手势时，处理器将当前时刻源显示屏上显示视频所在区域截成一张图像显示在源显示屏的中间位置。
[0097]对于图7中如何决策将时间栏转换为子图像还是将视频播放区域转换为子图像，在具体实现过程中有多种实现方式，为了便于理解，下面介绍几种可能的实现方式作为示例，本申请对此不做限定。例如：
[0098]对应用程序设定优先级，如将导航APP设置为第一优先级，将视频、音乐、无线广播等APP设置为第二优先级，将时间、天气预报等基础APP设置为第三优先级，以此类推，通过对不同的应用程序设置不同的优先级，在转换子图像时，将源显示屏上显示的优先级最高的应用程序的内容转换为子图像，以保证子图像显示的内容为用户想要推送的内容。
[0099]再例如：根据特定手势的位置靠近源显示屏上各个区域之间的距离确定，如果特定手势距离视频播放的位置比较近，则将视频播放区域转换为子图像，如果特定手势距离时间栏所处的位置比较近，则将时间栏转换为子图像。本申请不仅限于上述两种方案，也可以为其它方案。
[0100]源显示屏上显示的子图像的尺寸，可以为固定值，也可以变化值。可选地，处理器在后续不断获取摄像头采集的图像，如果识别出的特定手势中手指之间的距离不断减小，可以控制源显示屏上显示的子图像的尺寸也不断减小。
[0101]另外，处理器控制源显示屏上不仅呈现子图像，还可以显示能接收子图像的其它显示屏的标识、其它显示屏相对自身的方位信息等位置信息。由于车辆在出厂时，各个显示屏的位置已经固定好了，所以对于每一个显示屏来说，其它显示屏处在自身周围的方位信息都是固定的，可以将显示屏与显示屏之间的方位信息提前存储在存储器中。
[0102]可选地，显示屏与显示屏之间的方位信息可以通过两个显示屏的位置之间形成的向量来表示。以图2(a)为例，对于显示屏101-2来说，以显示屏101-2的中心为空间坐标原点(X0，Y0，Z0)，由于每个显示屏位置是固定的，可以预先存储各个显示屏之间的坐标位置，在确定各个其它显示屏以显示屏101-2的中心为空间坐标原点坐标系下的坐标(X，Y，Z)，然后计算出各个其它显示屏相对于显示屏101-2的向量M，将计算出的向量M作为各个其它显示屏相对于显示屏101-2的方位。
[0103]处理器可以控制源显示屏上显示其它显示屏的位置信息，以便用户直观地了解到如何将子图像移动到目标显示屏上。以图6为例，并结合图2(a)，由于源显示屏是要将播放的视频分享到其它显示屏上，而车辆上的其它显示屏均可以显示该视频，所以在源显示屏上可以虚拟出一个显示屏的图案，同时以文字的方式显示每个显示屏的相对于源显示屏的方位和名称，并将每个显示屏对应的图案按照方位关系，设置在源显示屏边缘的靠近实体显示屏处。
[0104]处理器控制源显示屏生成子图像呈现在源显示屏中间位置时，可以通过获取相应时刻获取的摄像头图像中的手势的空间坐标，将此时子图像处在源显示屏中的位置与手势的空间坐标建立映射关系，使得后续当手势移动后，子图像根据手势移动的方位和距离，相对于当前时刻子图像位置，作对应方位和等比例距离的移动。
[0105]此处需要说明的是，处理器可以实时地接收摄像头拍摄的每一张图像或每一帧视频流，也可以每隔一段时间接收一次摄像头拍摄的图像或视频流，本申请在此不作限定。所以下面提到“下一张图像或下一帧图像”并不代表摄像头拍摄的连续两张图像或两帧图像，可以为中间间隔了几张(帧)、几十张(帧)图像。
[0106]处理器在检测到特定手势后，若在后续的一帧或多帧图像中，持续没有检测到该特定手势，可以控制源显示屏不再显示子图像和位置信息。例如，处理器在首次检测到特定手势之后的下一帧或多帧图像中，没有识别出特定手势，可能是用户的手势发生变化、或手势移动至摄像头拍摄范围以外等情况，导致下一帧或多帧图像中没有特定手势，则处理器可以向源显示屏发送控制指令，控制源显示屏不显示子图像和位置信息。
[0107]可选地，为了避免交互功能的误触发，处理器在检测到特定手势超过一定次数后，确定触发该特定手势对应的功能。例如，处理器在预设时间内的传感信息中多次获取到该特定手势，则处理器可以认为获取了有效手势，并触发对应的功能。再例如，在预设时间内摄像头获取到的图像中的多帧都检测到了特定手势，并超过预设阈值。处理器可以向源显示屏发送控制指令，用于让源显示屏显示子图像和位置信息；如果在检测到包括特定手势的图像数量不足预设阈值时，处理器则不执行后续操作，将此次检测到的结果丢弃或删除。
[0108]如果处理器检测到下一帧或多帧图像中还包括特定手势，且相比较上一帧图像或首次检测到特定手势的图像(也即第i张图像或视频流中第j帧图像)，特定手势的位置发生变化时，可以根据检测到下一帧或多帧图像计算出的特定手势的空间坐标(x0，y0，z0)、上一帧图像或首次检测到特定手势的图像计算出的特定手势的空间坐标(x，y，z)，计算出特定手势的移动矢量m＝(x-x0，y-y0，z-z0)，然后将移动向量m与方位向量M进行比对，根据比对的结果，将与向量m平行或夹角最小的方位向量M对应的显示屏，确定为目标显示屏。
```

```
[0109]S303：触发子图像显示于第二显示屏。其中，触发子图像在第二显示屏上显示的条件为：检测第一位置信息与第二位置信息之间的距离大于设定阈值。
[0110]第一位置信息是指首次检测到特征手势的图像(也即第i张图像或视频流中第j帧图像)中特定手势相对于摄像头的空间坐标，第二位置信息是指下一帧或多帧之后的图像(也即第i+n张图像或视频流中第j+n帧图像，n为大于零的正整数)中特定手势相对于摄像头的空间坐标。具体实现过程为：
[0111]例如：处理器计算出特定手势在摄像头拍摄下一帧或多帧之后的图像中的移动向量m后，结合源显示屏平面的法向量n，计算出移动向量m投影到源显示屏平面的平移向量m1。然后，处理器可以根据平移向量m1的方向，确定源显示屏上的子图像移动的方向，可以根据平移向量m1的模长，以及预先设定的模长与源显示屏上子图像移动距离的比例关系，确定源显示屏上的子图像移动的距离。最后，处理器可以控制源显示屏上的子图像从平面中心沿平移向量m1的方向移动一定比例关系的平移向量m1的模长，从而实现子图像跟随用户手势的移动而移动。
[0112]随着用户的特定手势不断移动，处理器可以根据每次接收到的图像处理结果，都向源显示屏发送一次控制指令，让子图像显示在源显示屏上的不同位置，从而实现子图像随特定手势移动而移动。如果处理器检测到子图像随着特定手势移动而移动后，有部分或全部的界面不在源显示屏上显示时，则处理器可以同时向目标显示屏发送控制指令，让目标显示屏显示子图像未在源显示屏上显示的界面。
[0113]可选地，如果子图像为APP图标，处理器可以根据特定手势移动的距离，确定子图像移动到目标显示屏上显示时，控制器向目标显示屏发送控制指令，该控制指令用于让目标显示屏显示该APP图标，或者让目标显示屏显示该APP运行后的界面。
[0114]对于如何确定将子图像从源显示屏移动至目标显示屏的判断条件，本申请提供了两种判断条件作为示例，本申请对此不做限定，例如：
[0115]1、平移向量m1的模长。本申请预先设定一个阈值，处理器可以根据移动矢量m确定出目标显示屏后，再根据移动矢量m计算出平移向量m1的模长，如果该模长大于设定的阈值，则将子图像移动至目标显示屏；如果该模长不大于设定阈值，则子图像仍在源显示屏上移动。
[0116]2、子图像的中心点移出源显示屏。本申请以子图像的中心点移出源显示屏为界限，子图像随着特定手势的移动过程中，处理器可以实时检测源显示屏上子图像的位置，如果检测到子图像的中心点在源显示屏上的边框或不在源显示屏上，表明此时子图像已经有一半的面积移出源显示屏上，则将子图像移动至目标显示屏；如果检测子图像的中心点在源显示屏上，表明此时子图像没有一半的面积移出源显示屏上，则子图像仍在源显示屏上移动。
[0117]当然，本申请还可以根据子图像移出的面积、子图像的长边的尺寸等方式作为判断条件，在此不做限定。
[0118]对于子图像在源显示屏上移动且子图像的中心点未移出源显示屏这种情况，此时的源显示屏的界面上显示的效果如图8所示。而目标显示屏上，可以不显示源显示屏上移出的子图像的部分，也可以显示源显示屏上移出的子图像的部分，如图9所示，以便用户更加直观的看到自己移动子图像到哪个显示屏和移动的效果。
[0119]如果目标显示屏的分辨率和源显示屏的分辨率不相同，子图像移动到目标显示屏后，处理器可以将子图像的分辨率增加或减少至目标显示屏的分辨率，然后发送到目标显示屏上显示，以免子图像移动到目标显示屏上显示异常。
[0120]如果子图像的尺寸或长宽比与目标显示屏的尺寸或长宽比不相同，或源显示屏的尺寸或长宽比与目标显示屏的尺寸或长宽比不相同，处理器在确定子图像移动到目标显示屏时，可以根据两者的尺寸或长宽比进行比较，调整子图像的尺寸或长宽比，使子图像可以在目标显示屏上正常显示。例如：如果目标显示屏的尺寸、长边尺寸和短边尺寸都大于源显示屏，处理器可以让子图像保持原先的尺寸在目标界面上显示，如图10所示，也可以增大子图像的尺寸，以便子图像以最大尺寸在目标显示屏上显示，如图11所示；如果目标显示屏的尺寸、长边尺寸和短边尺寸都小于源显示屏或子图像的尺寸，处理器可以缩小子图像的尺寸，以便子图像可以正常的在目标显示屏上显示；如果目标显示屏的长边尺寸和短边尺寸的一个尺寸小于源显示屏或子图像，处理器可以缩小子图像的尺寸至长边尺寸符合目标显示屏的长边尺寸，或缩小子图像的尺寸至短边尺寸符合目标显示屏的短边尺寸，然后在目标显示屏上显示，如图12所示。
[0121]在子图像移动到目标显示屏后，如果处理器接收到摄像头采集的摄像头图像中应该不包括特定手势。此时对于用户来说，手势的转变应该从特定手势转换为“张开五指”、“张开拇指和食指”的非特定手势。示例性地，处理器在设定时间段内没有接收到包括特定手势的摄像头图像，或检测到特定手势如“张开五指，并逐渐靠近目标显示屏”、或接收到连续三次点击目标显示屏等方式，则可以关闭“多屏交互”功能，以节省功耗和计算成本。
[0122]在子图像移动到目标显示屏后，如果处理器接收到摄像头采集的摄像头图像中还包括特定手势，则可以默认为用户第二次将源显示屏上显示的内容进行多屏共享，此时处理器可以再次执行步骤S301至步骤S303中实现过程。
[0123]处理器在执行上述步骤S301至步骤S303过程中，如果检测到摄像头拍摄的图像中有两个或两个以上的特定手势，则可以认为用户将源显示屏上显示的内容分享至两个或两个以上的目标显示屏上，处理器可以先对两个特定手势进行标记，然后根据标记后的多个特定手势，执行步骤S301至步骤S303中实现过程，从而实现同时源显示屏上显示的内容向多个目标显示屏进行多屏共享。示例性地，如图13所示，处理器可以将源显示屏上显示的内容向两个目标显示屏进行共享时，源显示屏上可以同时显示两个特定手势对应的子图像、子图像移动的方向等信息，以便用户可以直观的看到两个子图像移动的过程。
[0124]本申请实施例中，处理器检测摄像头拍摄的图像中包括特定手势后，可以将此时源显示屏上显示的内容转化为子图像，并在源显示屏上显示其它可以显示子图像的显示屏的标识和相对于源显示屏的方位信息，用户可以直观的看到后续手势的移动方向，然后根据特定手势的移动方向，确定目标显示屏，并控制子图像在源显示屏上随特定手势的移动而移动，当检测到特定手势移动的距离大于设定阈值时，将子图像移动至目标显示屏上，从而实现多屏交互功能。
[0125]图14为本申请实施例提供的五指抓取实现显示屏投屏功能的手势和子图像移动过程的示意图。如图14所示，驾驶员在实现一次将源显示屏上显示的内容推送到目标显示屏过程中，手势的变化和移动过程为：
[0126]先将一只手放置在源显示屏前方，且手的五指处于张开状态，如图14(a)所示；然后五个手指逐渐并拢(和远离源显示屏方向移动)，激活源显示屏开启飞屏模式，并将当前界面显示的内容转换成子图像，如图14(b)所示；接着并拢的手指向左(或向目标显示屏方向)移动，此时手指呈现的手势保持不变，源显示屏上的子图像随着手指的移动而移动，且方向相同，如图14(c)所示；最后当子图像移动的距离满足设定条件后，自动在目标显示屏上显示，如图14(d)所示此时的手势可以仍为如图14(c)所示的状态，也可以为并拢的五指逐渐张开(和靠近目标显示屏方向移动)。
[0127]而显示屏投屏功能实现过程如下：
[0128]图14(a)所示的状态，对于处理器来说，执行图3所示的流程图中步骤S301，获取摄像头采集的图像，并进行识别；对于源显示屏，此时没有显示子图像、其它显示屏标识和方位信息等信息；对于目标显示屏，此时也没有显示子图像；对于用户来说，用户正张开五指靠近源显示屏。
[0129]图14(b)所示的状态，对于处理器来说，执行图3所示的流程图中步骤S302，检测到摄像头拍摄的图像中包括特定手势后，控制源显示屏上显示子图像、其它显示屏标识和方位信息等信息；对于源显示屏，此时显示缩小到界面中心的子图像，位于界面的其它显示屏标识和方位信息等信息；对于目标显示屏，此时没有显示子图像；对于用户来说，用户的手势正从张开的五指逐渐并拢的过程转换。
[0130]图14(c)所示的状态，对于处理器来说，执行图3所示的流程图中步骤S302，检测到特定手势移动后，根据移动方向和距离，确定目标显示屏和控制源显示屏上子图像的随特定手势的移动而移动；对于源显示屏，此时显示子图像在移动；对于目标显示屏，此时没有显示子图像(或显示部分子图像)；对于用户来说，用户的手势从源显示屏处移动到目标显示屏处。
[0131]图14(d)所示的状态，对于处理器来说，执行图3所示的流程图中步骤S303，检测到特定手势移动的距离大于设定阈值后，控制子图像移动至目标显示屏上；对于源显示屏，此时不显示子图像、其它显示屏标识和方位信息等信息；对于目标显示屏，此时显示子图像；对于用户来说，用户的手势移出摄像头拍摄区域(或将并拢的五指张开)。
[0132]从处理器内部执行来说，开启多屏交互功能后，处理器会持续对摄像头捕获的图像进行识别。首先是会运行一个手部目标检测器，然后对目标检测器检测到的手进行进一步分类，判断是否存在飞屏触发手势(也即上述提到的特定手势，为“五指张开”的手势)，若存在触发手势，则对其运行目标跟踪算法，跟踪触发手的位置和状态，并在源显示屏上显示可激活飞屏的提示；若跟踪手切换到了激活手势(也即上述提到的特定手势，为“五指并拢”或“两指并拢”)，则根据激活手势，则飞屏激活，此时进入到图3中的步骤S302，源显示屏上显示可进行飞屏的目标方向，此时若激活手发生移动，根据当前的手部坐标(x,y,z)计算移动矢量(x-x0,y-y0,z-z0)，再根据屏幕平面的法向量n，计算出屏幕投影平面的平移向量m1，源显示屏根据m1向量的距离和模显示移动效果，若移动距离即m1的模大于阈值，则向目标显示屏执行飞屏动作，若小于阈值内放弃激活手势，则可取消当前飞屏操作。
```

#### SEP

##### WO2020233409A1 Communication method and communication apparatus

![image](https://user-images.githubusercontent.com/99078052/152667636-915e700d-2234-434a-88c9-e9f4a93d5a65.png)
![image](https://user-images.githubusercontent.com/99078052/152667657-a73c3211-6c3a-4968-8fd3-236ddbd78160.png)

通信方法和通信装置

> 本申请要求于2019年05月17日提交中国专利局、申请号为201910413199.3、申请名称为“通信方法和通信装置”的中国专利申请的优先权，其全部内容通过引用结合在本申请中。

技术领域
[0002]本申请涉及通信领域，并且更具体地，尤其涉及一种通信方法和通信装置。

```
背景技术
[0003]随着通信技术的发展，第五代(5th Generation，5G)通信系统的系统性能也不断提高，而与第四代(4th Generation，4G)通信系统相比，5G通信系统的一个显著特征就是增加了对超可靠低延迟通信(Ultra-reliable and low latency communications,URLLC)业务的支持。一些URLLC业务是突发的、非周期的、以及不可预测的，无法半静态地与增强移动宽带(enhanced Mobile Broadband，eMBB)业务进行频谱共享。为了在保证URLLC低时延、高可靠传输需求的前提下提升频谱资源利用效率，在新无线(New Radio，NR)系统中，URLLC业务可以通过复用(Multiplexing)或抢占(pre-emption)来实现动态的频谱资源共享，从而降低URLLC业务的传输时延。相应地，基站会向eMBB UE发送抢占指示(pre-emption indicator,PI)，以指示之前调度给eMBB UE的时频资源被抢占了。
[0004]目前，NR系统中的用户设备(user equipment，UE)可以为混合业务用户(Hybrid UE)，即一个UE可以同时传输URLLC业务和eMBB业务。这种UE存在2种身份，一种是作为URLLC UE，可能被紧急调度，去抢占其他eMBB UE(或混合UE)的时频资源，一种是作为eMBB UE，自身被分配的资源也可能被其他UE抢占。如果Hybrid UE触发的PI抢占自己的URLLC传输资源，或者出现低优先级的URLLC业务抢占高优先级URLLC业务的传输资源，会影响URLLC业务传输的可靠性。

[0005]发明内容
[0006]本申请提供一种通信方法和通信装置，能够提高上行传输时URLLC业务进行资源抢占的合理性，保证URLLC业务的可靠传输。
```

```
1.一种通信方法，其特征在于，
包括：
接收第一下行控制信息DCI，所述第一DCI用于指示第一时频资源；
确定第二时频资源，所述第二时频资源用于上行传输，所述第一时频资源与所述第二时频资源重叠；
当所述上行传输满足第一条件时，在所述第二时频资源上传输上行信息。

2.根据权利要求1所述的方法，其特征在于，
所述方法还包括：
当所述上行传输不满足第一条件时，不在所述第二时频资源与所述第一时频资源重叠的时频资源上传输所述上行信息。

3.根据权利要求1或2所述的方法，其特征在于，
所述上行传输是第二DCI调度的，所述第一条件为所述第一DCI的发送时刻不晚于第二DCI的发送时刻。

4.根据权利要求3所述的方法，其特征在于，
所述上行传输是动态调度的上行数据信道，所述第二DCI用于调度所述上行数据信道；或
所述上行传输是动态调度的上行控制信道，所述第二DCI用于调度所述上行控制信道；或
所述上行传输是动态调度的上行探测参考信号，所述第二DCI用于调度所述上行探测参考信号；或
所述上行传输是配置授权的上行数据信道，所述第二DCI用于激活所述配置授权的上行数据信道。

5.根据权利要求1或2所述的方法，其特征在于，
当所述上行传输是所述第三DCI调度的，所述上行传输包括：动态调度的上行数据信道、动态调度的上行控制信道、动态调度的上行探测参考信号或动态激活的下行数据信道的反馈信息中的至少一种；
所述第一条件包括如下至少一种：
所述第三DCI中第一比特域取值属于第一集合，所述第一比特域用于指示所述上行传输的优先级取值；
所述第三DCI是第一格式，所述第一格式是高层配置的、多种调度数据传输的DCI格式中对应DCI负载大小最小的DCI格式；
所述第三DCI的无线网络临时标识RNTI取值为第一RNTI，所述第一RNTI是调制和编码方案-小区-无线网络临时标识MCS-C-RNTI；
所述第三DCI所在搜索空间标识属于第二集合；
所述第三DCI所在控制资源集合标识属于第三集合；
其中，所述第一集合、所述第二集合、所述第三集合、所述第一格式及所述第一RNTI是预定义的或高层参数配置的。

6.根据权利要求1或2所述的方法，其特征在于，
当所述上行传输是是第一高层参数配置的，所述上行传输包括：配置授权的上行数据 信道、半持续性调度的下行数据信道的反馈信息、调度请求、配置的上行探测参考信号中的至少一种，所述第一高层参数是所述配置授权的上行数据信道的配置参数、所述半持续性调度的下行数据信道的配置参数、所述调度请求的配置参数或配置的上行探测参考信号的配置参数；
所述第一条件包括如下至少一种：
所述第一高层参数中配置标识属于第四集合；
所述第一高层参数中传输周期小于或等于第一门限；
所述第一高层参数中传输长度小于或等于第二门限；
其中，所述第四集合、所述第一门限、所述第二门限是预定义的或高层参数配置的。

7.根据权利要求1或2所述的方法，其特征在于，
所述上行传输是第四DCI调度的，所述上行传输包括：动态调度的上行数据信道、动态激活的上行数据信道、动态调度的上行控制信道、动态激活的下行数据信道的反馈信息或动态调度的上行探测参考信号中的至少一种；
所述第一条件为所述上行传输的优先级大于或等于第一优先级，所述第一优先级由第一DCI指示，所述上行传输的优先级由第四DCI指示。

8.根据权利要求1或2所述的方法，其特征在于，
所述上行传输是第二高层参数配置的，所述上行传输包括：配置授权的上行数据信道、半持续性调度的下行数据信道的反馈信息、调度请求或配置的上行探测参考信号中的至少一种，所述第二高层参数是所述配置授权的上行数据信道的配置参数、所述半持续性调度的下行数据信道的配置参数、所述调度请求的配置参数或配置的上行探测参考信号的配置参数；
所述第一条件为所述上行传输的优先级大于或等于第一优先级，所述第一优先级由第一DCI指示，所述上行传输的优先级由如下至少一种信息确定：
所述第二高层参数中配置标识；
所述第二高层参数中传输周期；
所述第二高层参数中传输长度。

9.根据权利要求1至8中任一项所述的方法，其特征在于，
所述第一DCI为组播下行控制信息GC-DCI。
```

```
10.一种通信方法，其特征在于，
包括：
发送第一下行控制信息DCI，所述第一DCI用于指示第一时频资源；
当上行传输满足第一条件时，在第二时频资源上接收上行信息，所述第二时频资源用于所述上行传输，所述上行信息承载于所述第二时域资源上，且所述第一时频资源与所述第二时频资源重叠。

11.根据权利要求10所述的方法，其特征在于，
所述方法还包括：
当所述上行传输不满足第一条件时，不在所述第二时频资源与所述第一时频资源重叠的时频资源上接收所述上行信息。

12.根据权利要求10或11所述的方法，其特征在于，
所述上行传输是第二DCI调度的，所述第一条件为所述第一DCI的发送时刻不晚于第二DCI的发送时刻。

13.根据权利要求12所述的方法，其特征在于，
所述上行传输是动态调度的上行数据信道，所述第二DCI用于调度所述上行数据信道；或
所述上行传输是动态调度的上行控制信道，所述第二DCI用于调度所述上行控制信道；或
所述上行传输是动态调度的上行探测参考信号，所述第二DCI用于调度所述上行探测参考信号；或
所述上行传输是配置授权的上行数据信道，所述第二DCI用于激活所述配置授权的上行数据信道。

14.根据权利要求10或11所述的方法，其特征在于，
当所述上行传输是所述第三DCI调度的，所述上行传输包括：动态调度的上行数据信道、动态调度的上行控制信道、动态调度的上行探测参考信号或动态激活的下行数据信道的反馈信息中的至少一种；
所述第一条件包括如下至少一种：
所述第三DCI中第一比特域取值属于第一集合，所述第一比特域用于指示所述上行传输的优先级取值；
所述第三DCI是第一格式，所述第一格式是高层配置的、多种调度数据传输的DCI格式中对应DCI负载大小最小的DCI格式；
所述第三DCI的无线网络临时标识RNTI取值为第一RNTI，所述第一RNTI是调制和编码方案-小区-无线网络临时标识MCS-C-RNTI；
所述第三DCI所在搜索空间标识属于第二集合；
所述第三DCI所在控制资源集合标识属于第三集合；
其中，所述第一集合、所述第二集合、所述第三集合、所述第一格式及所述第一RNTI是预定义的或高层参数配置的。

15.根据权利要求10或11所述的方法，其特征在于，
当所述上行传输是是第一高层参数配置的，所述上行传输包括：配置授权的上行数据信道、半持续性调度的下行数据信道的反馈信息、调度请求、配置的上行探测参考信号中的至少一种，所述第一高层参数是所述配置授权的上行数据信道的配置参数、所述半持续性调度的下行数据信道的配置参数、所述调度请求的配置参数或配置的上行探测参考信号的配置参数；
所述第一条件包括如下至少一种：
所述第一高层参数中配置标识属于第四集合；
所述第一高层参数中传输周期小于或等于第一门限；
所述第一高层参数中传输长度小于或等于第二门限；
其中，所述第四集合、所述第一门限、所述第二门限是预定义的或高层参数配置的。

16.根据权利要求10或11所述的方法，其特征在于，
所述上行传输是第四DCI调度的，所述上行传输包括：动态调度的上行数据信道、动态激活的上行数据信道、动态调度的上行控制信道、动态激活的下行数据信道的反馈信息或动态调度的上行探测参考信号中的至少一种；
所述第一条件为所述上行传输的优先级大于或等于第一优先级，所述第一优先级由第 一DCI指示，所述上行传输的优先级由第四DCI指示。

17.根据权利要求10或11所述的方法，其特征在于，
所述上行传输是第二高层参数配置的，所述上行传输包括：配置授权的上行数据信道、半持续性调度的下行数据信道的反馈信息、调度请求或配置的上行探测参考信号中的至少一种，所述第二高层参数是所述配置授权的上行数据信道的配置参数、所述半持续性调度的下行数据信道的配置参数、所述调度请求的配置参数或配置的上行探测参考信号的配置参数；
所述第一条件为所述上行传输的优先级大于或等于第一优先级，所述第一优先级由第一DCI指示，所述上行传输的优先级由如下至少一种信息确定：
所述第二高层参数中配置标识；
所述第二高层参数中传输周期；
所述第二高层参数中传输长度。

18.根据权利要求10至17中任一项所述的方法，其特征在于，
所述第一DCI为组播下行控制信息GC-DCI。
```

```
37.一种通信装置，其特征在于，
包括：
处理器，所述处理器与存储器耦合；
存储器，用于存储计算机程序或指令；
处理器，用于执行所述存储器中存储的计算机程序或指令，以使得所述装置执行如权利要求1至18中任一项所述的方法。

38.一种可读存储介质，包括程序或指令，当所述程序或指令在计算机上运行时，如权利要求1至18中任意一项所述的方法被执行。
```

```
[0146]基于上述问题，本申请提出一种通信方法和通信装置，能够提高URLLC业务进行资源抢占的可靠性。
[0147]本申请实施例中，以网络设备为基站，终端设备为UE进行说明。
[0148]需要说明的是，本申请实施例中并不限制下述每个DCI中比特域的数量，以及比特域的位置。例如，第一DCI中可以包括第一比特域和第二比特域，所述第一比特域可以是第一DCI中任意一个比特域，所述第二比特域也可以是第一DCI中任意一个比特域。换句话说，所述第一比特域和所述第二比特域可以是第一DCI中的同一个比特域，或者，所述第一比特域和所述第二比特域可以是第一DCI中的不同比特域，本申请对此并不限定。应理解，本申请中的下述任意一个DCI与上述例子中的第一DCI类似，这里不做赘述。
[0149]下面结合图4，针对上行传输进行详细描述。图4是本申请实施例的通信方法400的一个示意性流程图。应理解，图4示出了通信方法的步骤或操作，但这些步骤或操作仅是示例，本申请实施例还可以执行其他操作或者图4中的各个操作的变形，或者，并不是所有步骤都需要执行，或者，这些步骤可以按照其他顺序执行。
[0150]S410，基站向UE发送第一DCI。其中，所述第一DCI用于指示第一时频资源。
[0151]所述第一时频资源可以包含时域资源和频域资源；或者，所述第一时频资源可以包含时域资源；或者，所述第一时频资源可以包含频域资源。
[0152]所述第一时频资源可以包含第一组时频单元，所述时频单元在时域上对应一个时域起始位置和长度，在频域上对应一个频域起始位置和频域长度。例如，所述时频单元是一个资源粒子(resource element,RE)，在时域上对应一个符号(包括符号的编号和长度)，在频域上对应一个子载波(包括子载波编号和宽度)。又例如，所述时频单元是一个单符号资源块，在时域上对应一个符号(包括符号的编号和长度)，在频域上对应一个资源块(包括资源块编号和宽度，资源块宽度可以是12个子载波)。又例如，所述时频单元是一个单时隙/子时隙资源块，在时域上对应一个时隙/子时隙(包括时隙/子时隙的编号和长度)，在频域上对应一个资源块(包括资源块编号和宽度，资源块宽度可以是12个子载波)。
[0153]可选地，所述第一DCI为组播下行控制信息GC-DCI。
[0154]可选地，第一时频资源可以是上行时频资源，且是被抢占的时频资源，接收第一DCI的UE在一定条件下需要在该第一时频资源上停止上行传输。
[0155]S420，UE确定第二时频资源。
[0156]其中，所述第二时频资源用于上行传输，所述第一时频资源与所述第二时频资源重叠。
[0157]所述第二时频资源可以包含第二组时频单元，所述时频单元的含义与S410中相同。
[0158]可选地，所述第一时频资源与所述第二时频资源重叠，指的是第一时频资源与第二时频资源在时域和频域都重叠，即第一时频资源和第二时频资源占用至少一个相同的时频单元。
[0159]可选地，所述第一时频资源与所述第二时频资源重叠，指的是第一时频资源与第二时频资源在时域重叠，即第一时频资源和第二时频资源占用至少一个相同的时域单元。可选地，所述时域单元可以是符号，或者，时隙/子时隙。
[0160]可选地，所述第一时频资源与所述第二时频资源重叠，可以是所述第一时频资源与所述第二时频资源部分重叠，也可以是所述第一时频资源与所述第二时频资源全部重叠，本申请对此并不限定。
[0161]S430，当所述上行传输满足第一条件时，UE在所述第二时频资源上向基站传输上行信息。
[0162]其中，所述第二时频资源用于所述上行传输，所述上行信息承载于所述第二时域资源上。或者，也可以说，所述上行信息是UE在所述第二时频资源上原本需要发送的数据或信号，所述上行传输就是指：UE在所述第二时频资源上向基站传输所述上行信息。
[0163]相应地，基站在所述第二时频资源上接收UE发送的所述上行信息。
[0164]根据图4中的方法，所述第一时频资源与所述第二时频资源重叠，当所述上行传输满足第一条件时，在所述第二时频资源上传输上行信息，能够避免UE触发的PI抢占自己的URLLC传输资源，或者出现低优先级的URLLC业务抢占高优先级URLLC业务的传输资源，从而能够提高上行传输时URLLC业务进行资源抢占的可靠性。
[0165]可选地，当所述上行传输不满足第一条件时，UE不在所述第二时频资源与所述第一时频资源重叠的时频资源上向基站传输所述上行信息。可选地，所述第二时频资源与所述第一时频资源重叠的时频资源可以是所述第二时频资源与所述第一时频资源共同占有的时频单元。
[0166]可选地，当所述上行传输不满足第一条件时，UE不在所述第二时频资源与所述第一时频资源重叠的时域单元上向基站传输所述上行信息。相应地，基站不在所述第二时频资源与所述第一时频资源重叠的时域单元上接收UE发送的所述上行信息。此时，基站可以在所述第二时频资源与所述第一时频资源重叠的时域单元上接收URLLC传输数据(该URLLC传输数据不是所述上行信息)，该URLLC传输数据可以是上述UE发送的，也可以是其他UE发送的，这里不做限定。
[0167]可选地，当所述上行传输不满足第一条件时，UE不在所述第二时频资源上向基站传输所述上行信息。此时，基站可以在所述第二时频资源上接收URLLC传输数据(该URLLC传输数据不是所述上行信息)，该URLLC传输数据可以是上述UE发送的，也可以是其他UE发送的，这里不做限定。
[0168]可选地，当所述上行传输不满足第一条件时，UE不在所述第二时频资源与所述第一时频资源重叠的时域单元、以及第一时频资源之后的属于第二时频资源的时域单元上向基站传输所述上行信息。此时，基站可以在所述第二时频资源与所述第一时频资源重叠的时域单元、以及第一时频资源之后的属于第二时频资源的时域单元上接收URLLC传输数据(该URLLC传输数据不是所述上行信息)，该URLLC传输数据可以是上述UE发送的，也可以是其他UE发送的，这里不做限定。
[0169]在本申请实施例中，根据所述第一条件的不同，可以分为以下几种情况。
```
```
[0170]情况一：
[0171]在一种可能的实现方式中，所述上行传输是动态调度的上行传输。例如，所述上行传输是第二DCI调度的。
[0172]可选地，所述第一条件为所述第一DCI的发送时刻不晚于第二DCI的发送时刻。可选地，所述DCI的发送时刻指的是承载所述DCI的下行控制信道占据的第一个符号或最 后一个符号。
[0173]例如，所述上行传输可以是动态调度的上行数据信道，例如动态物理上行共享信道(dynamic physical uplink shared channel，dynamic PUSCH)，所述第二DCI用于调度所述上行数据信道。
[0174]可选地，动态调度的上行数据信道可以只发送上行数据；或者，动态调度的上行数据信道可以只发送非周期CSI；或者，动态调度的上行数据信道可以同时发送上行数据和非周期CSI。
[0175]再例如，所述上行传输可以是动态调度的上行控制信道，所述第二DCI用于调度所述上行控制信道。
[0176]可选地，动态调度的上行控制信道可以承载动态调度的下行数据信道的反馈信息，即混合自动重复请求确定/否定(hybrid automatic repeat request acknowledge/negative acknowledge，HARQ ACK/NACK)消息，或，动态调度的上行控制信道可以承载动态触发的非周期信道状态信息(aperiodic CSI，A-CSI)报告，所述第二DCI用于调度所述下行数据信道或触发所述A-CSI报告。
[0177]再例如，所述上行传输可以是动态调度的上行探测参考信号，所述第二DCI用于调度所述上行探测参考信号。可选地，所述第二DCI可以是组播DCI。
[0178]再例如，所述上行传输可以是动态激活的上行数据信道，如类型2配置授权的上行数据信道(Type-2 configured PUSCH，又称半持续性调度的上行数据信道)或Type-2 configured PUSCH的首次传输，所述第二DCI用于激活所述Type-2 configured PUSCH。
[0179]再例如，所述上行传输可以是半持续性调度的下行数据信道的反馈信息或者半持续性调度的下行数据信道首次传输的反馈信息，即所述上行传输可以是承载半持续性调度的下行数据信道的反馈信息的上行控制信道，或者，承载半持续性调度的下行数据信道首次传输的反馈信息的上行控制信道，所述第二DCI用于激活所述半持续性调度的下行数据信道。
[0180]在另一种可能的实现方式中，所述第二上行传输是配置的上行传输。
[0181]可选地，所述第一条件包括：所述第二上行传输不是配置的上行传输，即当所述第二上行传输是配置的上行传输时，第一条件不满足。所述上行传输包括：配置授权的上行数据信道，配置的上行控制信道，承载半持续性调度的下行数据传输的HARQ-ACK反馈信息的上行控制信道、配置的上行探测参考信号(sounding reference signal，SRS)或配置的随机接入信道(physical random access channel，PRACH)中的至少一种。所述配置的上行控制信道包括承载调度请求的上行控制信道、承载周期性信道状态信息(periodic channel state information，P-CSI)或半持续性信道状态信息(semi-persistent CSI，SP-CSI)的上行控制信道中的至少一种。
[0182]其中，配置授权的上行数据信道可以为类型1配置授权上行传输(Type-1 configured PUSCH)，或，Type-2 configured PUSCH，或，Type-2 configured PUSCH的非首次传输。所述半持续性调度的下行数据传输可以是半持续性调度的下行数据传输的非首次传输。
[0183]可选地，所述第一条件为所述上行传输是配置授权的上行数据信道、承载调度请求的上行控制信道、或配置的随机接入信道(physical random access channel，PRACH)中的至少一种。其中，配置授权的上行数据信道可以为类型1配置授权上行传输(Type-1 configured  PUSCH)，或，类型2配置授权上行传输(Type-2 configured PUSCH)的非首次传输。其中，配置授权的上行数据信道可以是免授权物理上行共享信道(grant-free physical downlink shared channel，GF PUSCH)。
[0184]根据上述情况一中的方法，所述第一条件为所述第一DCI的发送时刻不晚于第二DCI的发送时刻，UE根据所述第一条件就可以确定是否在第二时频资源上传输上行信息，因此，本申请提供的方法可以在上行传输时实现更合理的传输决策，保证URLLC用户的上行传输不会抢占自己的上行传输、或者不会抢占后续调度的更高优先级URLLC传输。
```

```
[0185]情况二：
[0186]在一种可能的实现方式中，所述上行传输是所述第三DCI调度的，所述上行传输包括：动态调度的上行数据信道、动态调度的上行控制信道、动态调度的上行探测参考信号、动态激活的上行数据信道或动态激活的下行数据信道的反馈信息中的至少一种。
[0187]其中，所述动态调度的上行控制信道包括承载动态调度的下行数据信道的反馈信息的上行控制信道、承载动态触发的A-CSI报告的上行控制信道中至少一种。所述动态激活的上行数据信道包括Type-2 configured PUSCH或Type-2 configured PUSCH的首次传输，所述第三DCI用于激活所述Type-2 configured PUSCH。所述动态激活的下行数据信道的反馈信息可以是半持续性调度的下行数据信道的首次传输的反馈信息。
[0188]可选地，所述第一条件包括如下至少一种：
[0189](1)所述第三DCI中第一比特域取值属于第一集合，其中，所述第一集合是预定义的或高层参数配置的。
[0190]可选地，所述第一比特域直接用于指示所述上行传输的优先级取值。可选地，第一比特域的宽度可以为1个比特，例如，第一比特域取值为0表示该DCI调度/激活的传输是高优先级传输。对应地，所述第一条件为所述第一比特域取值为0。
[0191]可选地，所述第一比特域间接指示所述上行传输的优先级取值，例如，所述第一比特域指示Type-2 configured PUSCH或半持续性调度的下行数据信道的配置标识，所述配置标识关联一个确定的优先级取值。又例如，第一比特域指示所述动态调度或动态激活的下行数据信道的反馈信息所在码本信息，所述码本信息关联一个确定的优先级信息。
[0192](2)所述第三DCI是第一格式，所述第一格式是高层配置的、多种调度数据传输的DCI格式中对应DCI负载大小最小的DCI格式。
[0193]其中，所述第一格式是预定义的或高层参数配置的。
[0194]例如，所述第一格式是调度上行数据传输的DCI格式，且不是NR中DCI format 0_0和DCI format 0_1。可选地，所述第一格式的DCI比特数少于中DCI format 0_0或DCI format 0_1的DCI比特数。
[0195]可选地，所述第一格式由所述第三DCI中第二比特域指示，所述第一格式用于调度URLLC数据传输。
[0196](3)所述第三DCI的无线网络临时标识(radio network temporary identifier，RNTI)取值为第一RNTI。
[0197]其中，所述第一RNTI是预定义的或高层参数配置的。
[0198]可选地，第一RNTI可以是调制和编码方案-小区-无线网络临时标识(modulation and coding scheme-cell radio network temporary identifier，MCS-C-RNTI)或者配置调度无线网 络临时标识(configured scheduling radio network temporary identifier，CS-RNTI)等。
[0199]应理解，在本申请中，DCI对应的RNTI是指对该DCI的循环冗余码校验(cyclic redundancy check，CRC)比特序列进行加扰的RNTI。
[0200]或者，所述第一RNTI可以不同于NR中的现有RNTI，所述第一RNTI与URLLC数据传输对应，即使用所述第一RNTI加扰的DCI用于调度URLLC数据传输。
[0201](4)所述第三DCI所在搜索空间标识属于第二集合。
[0202]其中，所述第二集合是预定义的或高层参数配置的。
[0203](5)所述第三DCI所在控制资源集合标识属于第三集合。
[0204]其中，所述第三集合是预定义的或高层参数配置的。
[0205](6)所述上行传输是上行数据信道，所述上行数据信道关联的逻辑信道优先级大于或等于第一门限，或者，所述上行数据信道关联的逻辑信道标识(或优先级)属于第四集合。其中，所述第一门限或第四集合是预定义的或高层参数配置的。所述上行数据信道关联的逻辑信道指的是所述逻辑信道上的数据可以在所述上行数据信道上承载。
[0206]在另一种可能的实现方式中，所述上行传输是是第一高层参数配置的，所述上行传输包括：配置授权的上行数据信道、半持续性调度的下行数据信道的反馈信息、配置的上行控制信道、配置的上行探测参考信号中的至少一种。其中所述配置的上行控制信道包括承载调度请求的上行控制信道、承载P-CSI报告或SP-CSI报告的上行控制信道中的至少一种。相应地，所述第一高层参数是所述配置授权的上行数据信道的配置参数、所述半持续性调度的下行数据信道的配置参数、所述调度请求的配置参数、所述P-CSI报告或SP-CIS报告的配置参数、或配置的上行探测参考信号的配置参数。
[0207]其中，配置授权的上行数据信道可以为Type-1 configured PUSCH、或Type-2 configured PUSCH、或Type-2 configured PUSCH的非首次传输。所述半持续调度的下行数据信道的反馈信息可以是半持续调度的下行数据信道的非首次传输的反馈信息。
[0208]可选地，所述第一条件包括如下至少一种：
[0209](1)所述第一高层参数中配置标识属于第五集合。
[0210]其中，所述第五集合是预定义的或高层参数配置的。
[0211]例如，所述上行传输是配置授权的上行数据信道，所述第一高层参数包括所述配置授权的配置标识(或者索引)，所述第一条件时该标识取值属于第五集合。可选地，对于配置授权的上行数据信道，第一高层参数同时包括：配置标识和优先级指示，所述第五集合为对应的优先级指示取值为第一预设值的标识集合，所述第一预设值用于指示所述配置授权的上行数据信道具有高优先级。
[0212]类似地，所述上行传输是承载调度请求的上行控制信道，所述第一高层参数包括所述调度请求的配置标识，所述第一条件时该标识取值属于第五集合。可选地，对于调度请求，第一高层参数同时包括：配置标识和优先级指示，所述第五集合为对应的优先级指示取值为第一预设值的标识集合，所述第一预设值用于指示所述配置授权的上行数据信道具有高优先级。
[0213](2)所述第一高层参数中传输周期小于或等于第二门限。
[0214]其中，所述第二门限是预定义的或高层参数配置的。
[0215]例如，所述第二门限可以为2或7。
[0216](3)所述第一高层参数中传输长度小于或等于第三门限。
[0217]其中，所述第三门限是预定义的或高层参数配置的。
[0218]例如，所述第三门限可以为2、4或7。
[0219](4)所述上行传输关联的逻辑信道优先级大于或等于第四门限，或所述上行传输关联的逻辑信道标识或优先级属于第五集合所述第四门限或第六集合是预定义的或高层参数配置的。
[0220]此时，所述上行传输可以是配置授权的上行数据信道或调度请求(scheduling request，SR)。所述配置授权的上行数据信道关联的逻辑信道指的是所述逻辑信道上的数据可以在所述上行数据信道上承载。所述调度请求关联的逻辑信道指的所述逻辑信道标识关联的逻辑信道，指的是所述逻辑信道上有数据到达后会触发对应标识的调度请求。
[0221](5)所述第一高层参数指示的有效编码速率小于或等于第五门限。
[0222]此时，所述上行传输可以是配置授权的上行数据信道或半持续性调度的下行数据信道的反馈信息。所述有效编码速率由第一高层参数指示的调制与编码方案(modulation and coding scheme,MCS)确定。
[0223](6)所述上行传输是短格式的上行控制信道。
[0224]例如，所述上行传输是PUCCH格式0。
[0225]可选地，此时，所述上行传输可以是SR。
[0226]根据上述情况二中的方法，可以确定满足所述第一条件的所述上行传输为URLLC传输，此时，UE在所述第二时频资源上传输上行信息，能够避免UL PI抢占URLLC业务的传输资源，从而能够提高上行传输时URLLC业务进行资源抢占的可靠性。
```

```
[0227]情况三：
[0228]在一种可能的实现方式中，所述上行传输是第四DCI调度的，所述上行传输包括：动态调度的上行数据信道、动态激活的上行数据信道、动态调度的上行控制信道、动态激活的下行数据信道的反馈信息或动态调度的上行探测参考信号中的至少一种。所述动态调度的上行控制信道包括：承载动态调度的下行数据信道的反馈信息的上行控制信道、承载动态触发的非周期信道状态信息报告的上行控制信道中的至少一种。所述动态激活的上行数据信道包括Type-2 configured PUSCH或Type-2 configured PUSCH的首次传输，所述第三DCI用于激活所述Type-2 configured PUSCH。所述动态激活的下行数据信道的反馈信息可以是半持续性调度的下行数据信道的首次传输的反馈信息。
[0229]其中，对于上述上行数据信道，可以根据该上行数据信道关联的逻辑信道优先级确定该上行数据信道的优先级。
[0230]可选地，所述第一条件为所述上行传输的优先级大于或等于第一优先级。
[0231]其中，所述第一优先级由第一DCI指示，所述上行传输的优先级由第四DCI指示。可选地，所述上行传输的优先级可以由第四DCI显式地、直接地指示，例如，所述第四DCI中包含第一比特域，该第一比特域显式地指示调度的或激活的上行传输的优先级。
[0232]可选地，所述上行传输的优先级可以由第四DCI显式、间接地指示，例如，所述第四DCI中包含第二比特域，该第二比特域显式地指示类型2配置授权的上行数据信道的配置标识或半持续性调度调度的下行数据信道的配置标识，该配置标识关联一个确定的优先级信息。又例如，该第二比特域显式地指示动态调度的或半持续性调度的下行数据信道的反 馈信息的码本标识，该码本标识关联一个确定的优先级信息。
[0233]可选地，所述上行传输的优先级可以由第四DCI隐式地指示，例如，由所述第四DCI的格式、RNTI、控制资源集合或搜索空间隐式地指示。
[0234]在另一种可能的实现方式中，所述上行传输是第二高层参数配置的，所述上行传输包括：配置授权的上行数据信道、半持续性调度的下行数据信道的反馈信息、配置的上行控制信道或配置的上行探测参考信号中的至少一种。其中所述配置的上行控制信道包括承载调度请求的上行控制信道、承载P-CSI报告或SP-CSI报告的上行控制信道中的至少一种。所述第二高层参数是所述配置授权的上行数据信道的配置参数、所述半持续性调度的下行数据信道的配置参数、所述调度请求的配置参数、所述P-CSI报告或SP-CSI报告的配置参数或配置的上行探测参考信号的配置参数。
[0235]其中，对于上述配置的上行数据信道，可以根据该上行数据信道关联的逻辑信道优先级确定该上行数据信道的优先级；对于上述SR，可以根据该SR关联的逻辑信道优先级确定该SR的优先级。例如，上行数据信道或SR关联的逻辑信道标识或优先级与所述上行传输的优先级存在预设的对应关系。例如，所述优先级取值有N种，所述逻辑信道分为N个集合，所述N个集合分别对应所述N个优先级取值，N为整数。
[0236]可选地，所述第一条件为所述上行传输的优先级大于或等于第一优先级，所述第一优先级由第一DCI指示，所述上行传输的优先级由如下至少一种信息确定：
[0237]所述第二高层参数中配置标识、所述第二高层参数中传输周期或所述第二高层参数中传输长度。
[0238]根据上述情况三中的方法，当所述上行传输的优先级大于或等于第一优先级时，UE在所述第二时频资源上传输上行信息，因此，能够避免低优先级的URLLC业务抢占高优先级URLLC业务的传输资源，从而能够提高上行传输时URLLC业务进行资源抢占的可靠性。
```


## 参考

![Alt](https://repobeats.axiom.co/api/embed/0585c3d86267f7bdd2b4bdfb17796d484eb4d4c7.svg "Repobeats analytics image")

